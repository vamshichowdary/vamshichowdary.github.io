---
import { getCollection } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import PostCard from "@/components/PostCard.astro";

const posts = await getCollection("blog");
const sortedPosts = posts.sort(
  (a, b) => b.data.pubDatetime.getTime() - a.data.pubDatetime.getTime()
);
---

<Layout title="Posts">
  <Header />
  <main id="main-content" class="max-w-6xl mx-auto px-6 py-8">
    <h1 class="text-2xl font-bold tracking-wide mb-8 uppercase text-gray-900 dark:text-white border-b-2 border-accent inline-block pb-1">Posts</h1>
    
    <div class="space-y-4">
      {sortedPosts.map(({ data, id }) => (
        <PostCard href={`/posts/${id}`} frontmatter={data} />
      ))}
    </div>
  </main>
  <Footer />
</Layout>
